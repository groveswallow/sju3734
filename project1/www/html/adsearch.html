<!--
 * @Author: Tang
 * @Date: 2019-11-27 15:24:45
 * @LastEditors  : Tang
 * @LastEditTime : 2020-01-02 18:58:51
 * @Description: 待解决：1.重新美化两个选择框，尽量将其与tf输入框联系起来，2019.11.27。
   待解决：2.表单提交函数Post未进行修改，目前该函数无法完成需求，2019.11.28。
   待解决：3.autocom.php 该php未解决完成，数据库数据未导入数据，只写了测试代码。2019.11.28
 * @update：针对问题1，已进行修改。2019.11.28
 -->
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./bs/css/bootstrap.min.css" rel="stylesheet">
    <link href="./bs/css/bootstrap-select.css" rel="stylesheet">
    <link href="./bs/css/bootstrap-table.min.css" rel="stylesheet">
    <script src="./bs/js/jquery.min.js"></script>
    <script src="./bs/js/bootstrap.min.js"></script>
    <script src="./bs/js/bootstrap-select.js"></script>
    <script src="./bs/js/bootstrap-table.min.js"></script>
    <script src="./bs/js/bootstrap3-typeahead.min.js"></script>
    <script src="./bs/js/bootstrap-table-zh-CN.min.js"></script>
    <title>XXXdatabase</title>
</head>

<body background="./greek-vase.png" class="float">
    <script>
        function autoselect() {
            $.ajax({
                url: './selectcharacteristics.php',//该php未解决完成，数据库数据未导入数据，只写了测试代码。
                cache: false,
                type: 'get',
                dataType: 'json',
                async: true,
                success: function (res) {
                    var data = res[0];
                    var data1 = res[1];
                    var options = [], _options;
                    var options1 = [], _options1;
                    for (var i = 0; i < data.length; i++) {
                        var option = '<option value="' + data[i] + '">' + data[i] + '</option>';
                        options.push(option);
                    }
                    for (var i = 0; i < data1.length; i++) {
                        var option = '<option value="' + data1[i] + '">' + data1[i] + '</option>';
                        options1.push(option);
                    }
                    _options1 = options1.join('');
                    _options = options.join('');
                    console.log(_options);
                    console.log(_options1);
                    $('#regulation_type')[0].innerHTML = _options1;
                    $('#characteristics')[0].innerHTML = _options;
                }
            })
        }
        function autocom(flag) {
            $('#' + flag).typeahead({
                minLength: 1,
                items: 10,
                hint: true,
                highlight: true,
                source: function (query, process) {
                    $.ajax({
                        url: "./autocom.php",//该php未解决完成，数据库数据未导入数据，只写了测试代码。
                        cache: false,
                        type: 'post',
                        dataType: 'json',
                        async: true,
                        data: {
                            flag: query,
                        },
                        success: function (data) {
                            return process(data);
                        }
                    })
                }
            })
        }
        function Post() {  //未解决：默认值，以及用户输入后充值默认值的状态。
            var query = {
                tf: $('#tf').val(),
                cancer_type: $('#characteristics').val(),
                gene: $('#gene').val(),
                hallmark: $('#hallmark').val(),
                regulation_type: $('#regulation_type').val(),
                characteristics: $('#characteristics').val(),
            };
            //传递值的时候，ｉｎｐｕｔ未输入字符时的值为‘’，选择框则为ｎｕｌｌ。
            // var tf = $('#tf').val();
            // var regulation_type = $('#regulation_type').val();
            // var characteristics = $('#characteristics').val();
            // var cancer_type = $('#cancer_type').val();
            // var gene = $('#gene').val();
            // var hallmark = $('#hallmark').val();
            // var flag = 0;
            // var va = [$('#tf').val(), $('#cancer_type').val(), $('#gene').val(), $('#hallmark').val()]
            var patt = /[^0-9A-Za-z]/;
            for (let i in query) {
                if (query[i] == null) {
                    query[i] = 'null';
                }
            }
            $.ajax({
                url: './ser.php',
                method: 'post',
                dataType: 'json',
                async: true,
                data: query,
                success: function (result) {
                    $('＃serv').hide();
                    $('#table').bootstrapTable({
                        data: result,        // 表格数据来源
                        search: true,
                        striped: true,
                        showToggle: true,
                        strictSearch: true,
                        showColumns: true,                  //是否显示所有的列
                        showRefresh: true,
                        cache: false,
                        sidePagination: "client",           //分页方式：client客户端分页，server服务端分页（*）
                        pagination: true,                   //是否显示分页（*）
                        pageNumber: 1,                       //初始化加载第一页，默认第一页
                        pageSize: 10,                       //每页的记录行数（*）
                        pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
                        columns: [{
                            field: 'cancer',
                            title: 'Cancer Category'
                        }, {
                            field: 'tf',
                            title: 'TF'
                        }, {
                            field: 'gene',
                            title: 'Gene'
                        }, {
                            field: 'characteristics',
                            title: 'Characteristics'
                        },
                        {
                            field: 'regulation_type',
                            title: 'Regulation_type'
                        },
                        {
                            field: 'cancer_hallmark',
                            title: 'Cancer_hallmark'
                        },
                        {
                            field: 'details',
                            title: 'Details'
                        }]
                    });
                },
                error: function () {
                    alert('something is wrong,please connect author!');
                }
            });
            return false;
        }

    </script>
    <div class="nav" style="background-color: #000 ;height: 80px;">
        <div style="padding-right:5%;float: right;">
            <img src="./zi.png" style="height:80px;">
        </div>
        <ul class="nav navbar-nav navbar-left" style="margin-top:15px;">
            <li style="margin-left: 30px;"><a href="./index.html" style="color:slategray">HOME</a></li>
            <li style="margin-left: 30px;" class='dropdown' style="color:slategray">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" style="color:slategray">SEARCH<span
                        class="caret"></span></a>
                <ul class="dropdown-menu navbar-nav nav" style="background-color: #000;">
                    <li><a href="./gesearch.html" style="color:slategray">General Search</a></li>
                    <li><a href="./adsearch.html" style="color:slategray">Advanced Search</a></li>
                </ul>
            </li>
            </li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">BROWSE</a></li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">DOWNLOAD</a></li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">SUBMIT</a></li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">ABOUT</a></li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">HELP</a></li>
        </ul>
    </div>
    </div>
    <div id="serv" style="width: 100%;height: 100%;">
        <div style="width: 50%; height:200px; margin-left:25%; margin-top: 4%; text-align: center">
            <h1><span class="glyphicon glyphicon-search" aria-hidden="true" style="font-size: 30px;"></span> The
                Interface of Advanced Search</h1>
            <hr class="simple" color="black">
            <p>Lnc2Cancer 2.0 provides users with a simple and fast method to search and explore all of our data in
                several ways. Lnc2Cancer 2.0 enables users to search by lncRNA name, cancer name or both. Lnc2Cancer
                also offers fuzzy keyword searching capabilities, which enables easy searching by returning the closest
                possible matching records. ADVANCED SEARCH provides more detailed and systemic search. View our Help
                page for further help.

            </p>
            <p>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p>
            <div style="width: 75%; height:200px; margin-left:10%; padding-top: 2%; text-align: center">
                <label>General search offers fuzzy keyword searching capabilities:
                    For 'LncRNA', you can use Gene Symbol (e.g. 'MALAT1'), Entrez Gene ID (e.g. '378938'), Ensembl ID
                    (e.g. 'ENSG00000251562') and other names.
                </label>
                <hr>
                <form class='form-horizontal' action="" method="post" onsubmit="return Post();">
                    <div style="width: 100%;height: 55%;">
                        <div class="input-group"> <span class="input-group-addon" id="basic-addon1">TF</span>
                            <input type="text" class="form-control" placeholder="Search for TF" id="tf"></div>
                        <div class="col-lg-5" style="margin-left: 5%;margin-top: 2%;">
                            <label>Select Mode of Regulation Type</label>
                            <select multiple class="selectpicker form-control" id="regulation_type"
                                title="Select Regulation Type" data-container="body" data-live-search="true"
                                data-hide-disabled="true" data-actions-box="true" data-virtual-scroll="false">
                            </select>
                        </div>
                        <div class="col-lg-5" style="margin-left: 8%;margin-top: 2%;">
                            <label>Select TF Characteristics</label>
                            <select multiple class="selectpicker form-control" id="characteristics"
                                title="Select Characteristics" ddata-container="body" data-live-search="true"
                                data-hide-disabled="true" data-actions-box="true" data-virtual-scroll="false">
                            </select>
                            <script>
                                autoselect();
                            </script>
                        </div>
                    </div>
                    <br>
                    <hr>
                    <div class="input-group"> <span class="input-group-addon" id="basic-addon1">Cancer</span>
                        <input type="text" class="form-control" placeholder="Search for Cancer" id="cancer_type">
                    </div>
                    <hr>
                    <div class="input-group"> <span class="input-group-addon" id="basic-addon1">Gene</span>
                        <input type="text" class="form-control" placeholder="Search for Gene" id="gene"></div>
                    <hr>
                    <div class="input-group"> <span class="input-group-addon" id="basic-addon1">Hallmark</span>
                        <input type="text" class="form-control" placeholder="Search for Hallmark of Cancer"
                            id="hallmark"></div>
                    <!-- //未解决页面缩小后按钮被页脚遮挡的BUG -->
                    <button class="btn btn-default" type="reset" id="reset"
                        style="margin-top: 5%;"><b>Reset</b></button>
                    <script>
                        $(function () {
                            $('#reset').click(function () {
                                $('#gene').val('');
                                $('#characteristics').val('');
                            })
                        })
                    </script>
                    <button class="btn btn-default" type="submit" id="sub"
                        style="margin-top: 5%;"><b>Search</b></button>
                    <script>
                        $(function () {
                            autocom('tf');
                            autocom('cancer_type');
                            autocom('gene');
                            autocom('hallmark');
                        })
                    </script>
                </form>
            </div>
        </div>
    </div>
    <footer class="footer navbar-fixed-bottom" style="background-color:whitesmoke;">
        <div class="container">
            <h3>CONTACT US</h3>
        </div>
    </footer>
</body>

</html>