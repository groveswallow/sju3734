<!--
 * @Author: Tang
 * @Date: 2019-11-22 22:30:55
 * @LastEditors: Tang
 * @LastEditTime: 2019-12-12 10:49:04
 * @Description: 待解决：1.搜索框上方的描述套话。2.autocom.php未写好(考虑cancer单独一个PHP数据文件)，只有测试代码;ser.php未写好，只有测试代码。3.改写auotcom的script函数，方便直接用，避免重复代码。
 * 问题3已经解决一部分，需要进行测试，看是否能成功运行。
 -->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./bs/css/bootstrap.min.css" rel="stylesheet">
    <link href="./bs/css/bootstrap-select.css" rel="stylesheet">
    <link href="./bs/css/bootstrap-table.min.css" rel="stylesheet">
    <script src="./bs/js/jquery.min.js"></script>
    <script src="./bs/js/bootstrap.min.js"></script>
    <script src="./bs/js/bootstrap-select.js"></script>
    <script src="./bs/js/bootstrap-table.min.js"></script>
    <script src="./bs/js/bootstrap3-typeahead.min.js"></script>
    <script src="./bs/js/bootstrap-table-zh-CN.min.js"></script>
    <title>XXXdatabase</title>
</head>

<body background="./greek-vase.png" class="float">
    <script>
        function autocom(flag) {
            $('#' + flag).typeahead({
                minLength: 1,
                items: 10,
                hint: true,
                highlight: true,
                source: function (query, process) {
                    $.ajax({
                        url: "./autocom.php",//未解决，只写了测试代码。
                        cache: false,
                        type: 'post',
                        dataType: 'json',
                        async: true,
                        data: {
                            flag: query,
                        },
                        success: function (data) {
                            return process(data);
                        }
                    })
                }
            })
        }
        function Post() {
            var query = {
                tf: $('#tf').val(),
                cancer_type: $('#characteristics').val(),
            };
            // var tf = $('#tf').val();
            // var regulation_type = $('#regulation_type').val();
            // var characteristics = $('#characteristics').val();
            // var cancer_type = $('#cancer_type').val();
            // var gene = $('#gene').val();
            // var hallmark = $('#hallmark').val();
            // var flag = 0;
            // var va = [$('#tf').val(), $('#cancer_type').val(), $('#gene').val(), $('#hallmark').val()]
            var patt = /[^0-9A-Za-z]/;
            for (let i in query) {
                if (query[i] == null) {
                    query[i] = 'null';
                }
            }
            $.ajax({
                url: './ser.php',
                method: 'post',
                dataType: 'json',
                async: true,
                data: query,
                success: function (result) {
                    $('＃serv').hide();
                    $('#table').bootstrapTable({
                        data: result,        // 表格数据来源
                        search: true,
                        striped: true,
                        showToggle: true,
                        strictSearch: true,
                        showColumns: true,                  //是否显示所有的列
                        showRefresh: true,
                        cache: false,
                        sidePagination: "client",           //分页方式：client客户端分页，server服务端分页（*）
                        pagination: true,                   //是否显示分页（*）
                        pageNumber: 1,                       //初始化加载第一页，默认第一页
                        pageSize: 10,                       //每页的记录行数（*）
                        pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
                        columns: [{
                            field: 'cancer',
                            title: 'Cancer Category'
                        }, {
                            field: 'tf',
                            title: 'TF'
                        }, {
                            field: 'gene',
                            title: 'Gene'
                        }, {
                            field: 'characteristics',
                            title: 'Characteristics'
                        },
                        {
                            field: 'regulation_type',
                            title: 'Regulation_type'
                        },
                        {
                            field: 'cancer_hallmark',
                            title: 'Cancer_hallmark'
                        },
                        {
                            field: 'details',
                            title: 'Details'
                        }]
                    });
                },
                error: function () {
                    alert('something is wrong,please connect author!');
                }
            });
            return false;
        }
    </script>
    <div class="nav" style="background-color: #000 ;height: 80px;">
        <div style="padding-right:5%;float: right;">
            <img src="./zi.png" style="height:80px;">
        </div>
        <ul class="nav navbar-nav navbar-left" style="margin-top:15px;">
            <li style="margin-left: 30px;"><a href="./index.html" style="color:slategray">HOME</a></li>
            <li style="margin-left: 30px;" class='dropdown' style="color:slategray">
                <a class="dropdown-toggle" data-toggle="dropdown" role="button" style="color:slategray">SEARCH<span
                        class="caret"></span></a>
                <ul class="dropdown-menu navbar-nav nav" style="background-color: #000;">
                    <li><a href="./gesearch.html" style="color:slategray">General Search</a></li>
                    <li><a href="./adsearch.html" style="color:slategray">Advanced Search</a></li>
                </ul>
            </li>
            </li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">DOWNLOAD</a></li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">SUBMIT</a></li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">ABOUT</a></li>
            <li style="margin-left: 30px;"><a href="" style="color:slategray">HELP</a></li>
        </ul>
    </div>
    </div>
    <div id="serv" style="width: 100%;height: 100%;">
        <div style="width: 50%; height:200px; margin-left:25%; margin-top: 8%; text-align: center">
            <h1><span class="glyphicon glyphicon-search" aria-hidden="true" style="font-size: 30px;"></span> The
                Interface of General Search</h1>
            <hr class="simple" color="black">
            <p>Lnc2Cancer 2.0 provides users with a simple and fast method to search and explore all of our data in
                several ways. Lnc2Cancer 2.0 enables users to search by lncRNA name, cancer name or both. Lnc2Cancer
                also offers fuzzy keyword searching capabilities, which enables easy searching by returning the closest
                possible matching records. ADVANCED SEARCH provides more detailed and systemic search. View our Help
                page for further help.

            </p>
            <p>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</p>
            <div style="width: 75%; height:200px; margin-left:10%; padding-top: 3%; text-align: center">
                <label>General search offers fuzzy keyword searching capabilities:

                    For 'LncRNA', you can use Gene Symbol (e.g. 'MALAT1'), Entrez Gene ID (e.g. '378938'), Ensembl ID
                    (e.g. 'ENSG00000251562') and other names.

                </label>
                <div id="sertf">
                    <form action="" method="post" onsubmit="return Post();">
                        <input type="text" class="form-control" placeholder="Search for TF" id="tf">
                        <hr>
                        <label>For 'Cancer', you can use Cancer name (e.g. 'breast cancer'), or ICD-0-3 code (e.g.
                            'C50').</label>
                        <input type="text" class="form-control" placeholder="Search for Cancer" id="cancer_type">
                        <script>
                            $(function () {
                                autocom('tf');
                                autocom('cancer_type');
                            })
                        </script>
                        <button class="btn btn-default" type="reset" id="reset"
                            style="margin-top: 5%;"><b>Reset</b></button>
                        <button class="btn btn-default" type="submit" id="sub" style="margin-top: 5%;"><b>Search</b></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer navbar-fixed-bottom" style="background-color:whitesmoke;">
        <div class="container">
            <h3>CONTACT US</h3>
        </div>
    </footer>
</body>

</html>